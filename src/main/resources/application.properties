#
# Copyright 2017 Alfresco, Inc. and/or its affiliates.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

server.port=${MODELING_PORT:8088}
spring.application.name=${MODELING_APP_NAME:modeling-app}

spring.cloud.stream.bindings.auditProducer.destination=${MODELING_AUDIT_PRODUCER_DEST:engineEvents}
spring.cloud.stream.bindings.auditProducer.contentType=${MODELING_AUDIT_PRODUCER_CONTENT_TYPE:application/json}
spring.cloud.stream.bindings.myCmdResults.destination=${MODELING_COMMAND_RESULTS_DEST:commandResults}
spring.cloud.stream.bindings.myCmdResults.group=${MODELING_COMMAND_RESULTS_GROUP:myCmdGroup}
spring.cloud.stream.bindings.myCmdResults.contentType=${MODELING_COMMAND_RESULTS_CONTENT_TYPE:application/json}
spring.cloud.stream.bindings.myCmdProducer.destination=${MODELING_COMMAND_RESULTS_DEST:commandConsumer}
spring.cloud.stream.bindings.myCmdProducer.contentType=${MODELING_COMMAND_RESULTS_CONTENT_TYPE:application/json}
spring.jackson.serialization.fail-on-unwrapped-type-identifiers=${MODELING_JACKSON_FAIL_ON_UNWRAPPED_IDS:false}

keycloak.auth-server-url=${ACT_KEYCLOAK_URL:http://activiti-cloud-sso-idm:8180/auth}
keycloak.realm=${ACT_KEYCLOAK_REALM:springboot}
keycloak.resource=${ACT_KEYCLOAK_RESOURCE:activiti}
keycloak.public-client=${ACT_KEYCLOAK_CLIENT:true}

keycloak.security-constraints[0].authRoles[0]=${ACT_KEYCLOAK_ROLES:user}
keycloak.security-constraints[0].securityCollections[0].patterns[0]=${ACT_KEYCLOAK_PATTERNS:/v1/*}

keycloak.principal-attribute=${ACT_KEYCLOAK_PRINCIPAL_ATTRIBUTE:preferred-username}
# see https://issues.jboss.org/browse/KEYCLOAK-810 for configuration options

keycloakadminclientapp=${ACT_KEYCLOAK_CLIENT_APP:admin-cli}
keycloakclientuser=${ACT_KEYCLOAK_CLIENT_USER:client}
keycloakclientpassword=${ACT_KEYCLOAK_CLIENT_PASSWORD:client}
# this user needs to have the realm management roles assigned

#change this for prod envs
keycloak.ssl-required=${ACT_KEYCLOAK_SSL_REQUIRED:none}

spring.rabbitmq.host=${ACT_RABBITMQ_HOST:rabbitmq}
eureka.client.serviceUrl.defaultZone=${ACT_EUREKA_URL:http://activiti-cloud-registry:8761/eureka/}

#hostname as declared to eureka
eureka.instance.hostname=${MODELING_HOST:activiti-cloud-runtime-bundle}

#spring.datasource.driverClassName=${MODELING_DB_DRIVER:org.postgresql.Driver}
#spring.datasource.url=${MODELING_DB_URI:jdbc:postgresql://rb-postgres:5432/activitidb}
#spring.datasource.username=${MODELING_DB_USER:postgres}
#spring.datasource.password=${MODELING_DB_PASS:password}
#
#spring.jpa.database-platform=${MODELING_DB_PLATFORM:org.hibernate.dialect.PostgreSQLDialect}
#spring.jpa.generate-ddl=${MODELING_GENERATEDDL:true}
#spring.jpa.hibernate.ddl-auto=${MODELING_DDLAUTO:create}

#env variable or /processes/ fallback - or if below is removed classpath:/processes/ is used as per ActivitiProperties class
spring.activiti.process-definition-location-prefix=file:${MODELING_PROCESSES_PATH:/processes/}
eureka.client.enabled=${MODELING_EUREKA_CLIENT_ENABLED:true}
loader.path=${MODELING_LIBDIR:lib/}
spring.activiti.useStrongUuids=true

#zipkin
spring.zipkin.baseUrl= http://zipkin:80/
spring.sleuth.enabled = true
spring.sleuth.sampler.percentage = 1.0
